# AI æç¤ºè¯åº“ç®¡ç†ç³»ç»Ÿ - äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

**ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2024å¹´12æœˆ19æ—¥  
**äº§å“åç§°**: TopAI - å…¨çƒæœ€çƒ­é—¨ AI æç¤ºè¯å¤§å…¨  

---

## 1. äº§å“æ¦‚è¿°

### 1.1 äº§å“ç®€ä»‹

TopAI æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ AI æç¤ºè¯æ”¶é›†ä¸ç®¡ç†å¹³å°ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ä¼˜è´¨ AI æç¤ºè¯çš„æµè§ˆã€æœç´¢ã€ç®¡ç†åŠŸèƒ½ã€‚å¹³å°åˆ†ä¸ºå‰ç«¯å±•ç¤ºæ¨¡å—å’Œåå°ç®¡ç†æ¨¡å—ï¼Œæ”¯æŒå¤šç§æ•°æ®å¯¼å…¥æ–¹å¼ï¼Œé€‚åˆä¸ªäººæˆ–å›¢é˜Ÿç®¡ç†å’Œåˆ†äº« AI åˆ›ä½œæç¤ºè¯ã€‚

### 1.2 ç›®æ ‡ç”¨æˆ·

- **æ™®é€šç”¨æˆ·**: æµè§ˆã€æœç´¢ã€å¤åˆ¶ AI æç¤ºè¯ï¼Œè·å–åˆ›ä½œçµæ„Ÿ
- **å†…å®¹ç®¡ç†å‘˜**: ç»´æŠ¤æç¤ºè¯æ•°æ®åº“ï¼Œè¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œæ‰¹é‡å¯¼å…¥æ•°æ®

### 1.3 äº§å“ç›®æ ‡

1. æä¾›ç¾è§‚æ˜“ç”¨çš„æç¤ºè¯å±•ç¤ºç•Œé¢
2. æ”¯æŒé«˜æ•ˆçš„æœç´¢å’Œç­›é€‰åŠŸèƒ½
3. æä¾›å®Œæ•´çš„åå°ç®¡ç†èƒ½åŠ›
4. æ”¯æŒå¤šç§æ•°æ®æºçš„æ‰¹é‡å¯¼å…¥
5. ä¿éšœç®¡ç†åå°çš„å®‰å…¨è®¿é—®

---

## 2. åŠŸèƒ½æ¨¡å—

### 2.1 å‰ç«¯å±•ç¤ºæ¨¡å—

#### 2.1.1 é¦–é¡µå±•ç¤º

| åŠŸèƒ½ç‚¹ | æè¿° | ä¼˜å…ˆçº§ |
|--------|------|--------|
| å¡ç‰‡å¼å¸ƒå±€ | ä»¥å¡ç‰‡å½¢å¼å±•ç¤ºæç¤ºè¯ï¼ŒåŒ…å«å›¾ç‰‡ã€æ ‡é¢˜ã€æè¿°ã€æ ‡ç­¾ã€æç¤ºè¯å†…å®¹ | P0 |
| å“åº”å¼è®¾è®¡ | é€‚é…æ¡Œé¢ç«¯ã€å¹³æ¿ã€ç§»åŠ¨ç«¯å¤šç§å±å¹•å°ºå¯¸ | P0 |
| æš—è‰²ä¸»é¢˜ | é‡‡ç”¨ç°ä»£æ·±è‰² UI è®¾è®¡ï¼Œé»‘é‡‘/å†·è“é£æ ¼ | P1 |
| åŠ¨æ•ˆè®¾è®¡ | å¡ç‰‡æ‚¬æµ®æ•ˆæœã€æ¸å˜å…‰æ™•ã€å¹³æ»‘è¿‡æ¸¡åŠ¨ç”» | P2 |

**å¡ç‰‡å†…å®¹åŒ…å«**:

- æ•ˆæœå›¾ç‰‡ï¼ˆæ”¯æŒæœ¬åœ°/è¿œç¨‹å›¾ç‰‡ï¼Œå«å›¾ç‰‡ä»£ç†é˜²ç›—é“¾ï¼‰
- æ•ˆæœæ ‡é¢˜ï¼ˆeffectï¼‰
- è¯¦ç»†æè¿°ï¼ˆdescriptionï¼‰
- AI æ¨¡å‹æ ‡ç­¾ï¼ˆmodelTagsï¼‰- æ˜¾ç¤ºé€‚ç”¨çš„ AI æ¨¡å‹ï¼Œå¦‚ Midjourneyã€DALL-E ç­‰
- åœºæ™¯/ç”¨é€”æ ‡ç­¾ï¼ˆtagsï¼‰- æœ€å¤šæ˜¾ç¤º3ä¸ªï¼Œè¶…å‡ºæ˜¾ç¤ºæ•°é‡
- ç”Ÿæˆç±»å‹å¾½ç« ï¼ˆcategoryï¼‰- æ–‡ç”Ÿå›¾/æ–‡ç”Ÿè§†é¢‘/æ–‡ç”ŸéŸ³é¢‘ç­‰
- æç¤ºè¯å†…å®¹ï¼ˆpromptï¼‰- æ”¯æŒå±•å¼€æŸ¥çœ‹
- æ›´æ–°æ—¶é—´ï¼ˆupdatedAtï¼‰
- æ¥æºé“¾æ¥ï¼ˆsourceï¼‰

#### 2.1.2 æœç´¢åŠŸèƒ½

| åŠŸèƒ½ç‚¹ | æè¿° | ä¼˜å…ˆçº§ |
|--------|------|--------|
| å…¨å±€æœç´¢ | æ”¯æŒæŒ‰æ•ˆæœåç§°ã€æè¿°ã€æç¤ºè¯å†…å®¹è¿›è¡Œå…¨æ–‡æœç´¢ | P0 |
| å®æ—¶æœç´¢ | è¾“å…¥å³æœç´¢ï¼Œæ— éœ€ç‚¹å‡»æŒ‰é’® | P1 |
| æœç´¢é«˜äº® | æœç´¢æ—¶è‡ªåŠ¨é‡ç½®åˆ†é¡µåˆ°ç¬¬ä¸€é¡µ | P1 |
| å…¨å®½æœç´¢æ¡† | æœç´¢æ¡†å®½åº¦ä¸å¡ç‰‡ç½‘æ ¼ä¸¤ç«¯å¯¹é½ï¼Œæå‡è§†è§‰ä¸€è‡´æ€§ | P1 |

#### 2.1.3 ç­›é€‰åŠŸèƒ½

| åŠŸèƒ½ç‚¹ | æè¿° | ä¼˜å…ˆçº§ |
|--------|------|--------|
| ç”Ÿæˆç±»å‹ç­›é€‰ | æŒ‰ç”Ÿæˆç±»å‹ï¼ˆæ–‡ç”Ÿå›¾/æ–‡ç”Ÿè§†é¢‘/æ–‡ç”ŸéŸ³é¢‘/å…¶ä»–ï¼‰ç­›é€‰ | P0 |
| AI æ¨¡å‹ç­›é€‰ | æŒ‰ AI æ¨¡å‹ï¼ˆMidjourney/DALL-E/Stable Diffusion/DeepSeek ç­‰ï¼‰ç­›é€‰ | P0 |
| åœºæ™¯æ ‡ç­¾ç­›é€‰ | æŒ‰åœºæ™¯/ç”¨é€”æ ‡ç­¾å¿«é€Ÿç­›é€‰ç›¸å…³æç¤ºè¯ | P0 |
| ç»„åˆç­›é€‰ | æ”¯æŒç”Ÿæˆç±»å‹+AIæ¨¡å‹+åœºæ™¯æ ‡ç­¾+æœç´¢è¯åŒæ—¶ç”Ÿæ•ˆ | P1 |
| ç­›é€‰é‡ç½® | åˆ‡æ¢ç­›é€‰æ¡ä»¶æ—¶è‡ªåŠ¨é‡ç½®åˆ†é¡µ | P1 |
| å·¦ä¾§å¯¼èˆªæ ç­›é€‰ | æ¡Œé¢ç«¯å°†ç”Ÿæˆç±»å‹å’ŒAIæ¨¡å‹ç­›é€‰ç§»è‡³å·¦ä¾§å¯¼èˆªæ ï¼Œé‡‡ç”¨çºµå‘å¸ƒå±€ | P1 |

#### 2.1.4 åˆ†é¡µåŠŸèƒ½

| åŠŸèƒ½ç‚¹ | æè¿° | ä¼˜å…ˆçº§ |
|--------|------|--------|
| æ™ºèƒ½åˆ†é¡µ | æ”¯æŒå¤§æ•°æ®é‡ä¸‹çš„åˆ†é¡µåŠ è½½ | P0 |
| å¯é…ç½®é¡µå¤§å° | æ”¯æŒ 6/12/24/48 æ¡/é¡µ | P1 |
| é¡µç å¯¼èˆª | æ˜¾ç¤ºå½“å‰é¡µç ã€æ€»é¡µæ•°ã€æ€»è®°å½•æ•° | P1 |
| è·³è½¬åŠŸèƒ½ | æ”¯æŒä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µ/æŒ‡å®šé¡µè·³è½¬ | P1 |

#### 2.1.5 äº¤äº’åŠŸèƒ½

| åŠŸèƒ½ç‚¹ | æè¿° | ä¼˜å…ˆçº§ |
|--------|------|--------|
| ä¸€é”®å¤åˆ¶ | ç‚¹å‡»æŒ‰é’®å¤åˆ¶æç¤ºè¯åˆ°å‰ªè´´æ¿ | P0 |
| å¤åˆ¶åé¦ˆ | å¤åˆ¶æˆåŠŸåæ˜¾ç¤ºå‹¾é€‰å›¾æ ‡åé¦ˆ | P1 |
| æ¥æºè·³è½¬ | ç‚¹å‡»æ¥æºé“¾æ¥æ–°çª—å£æ‰“å¼€åŸå§‹æ¥æº | P2 |

---

### 2.2 åå°ç®¡ç†æ¨¡å—

#### 2.2.1 ç™»å½•è®¤è¯

| åŠŸèƒ½ç‚¹ | æè¿° | ä¼˜å…ˆçº§ |
|--------|------|--------|
| ç”¨æˆ·åå¯†ç ç™»å½• | åŸºäºç¯å¢ƒå˜é‡é…ç½®çš„ç®¡ç†å‘˜è´¦å·å¯†ç  | P0 |
| Token è®¤è¯ | ä½¿ç”¨ Base64 ç¼–ç çš„ Tokenï¼Œæœ‰æ•ˆæœŸ7å¤© | P0 |
| è‡ªåŠ¨è·³è½¬ | æœªç™»å½•è®¿é—®ç®¡ç†é¡µè‡ªåŠ¨è·³è½¬ç™»å½•é¡µ | P0 |
| åŸŸåè®¿é—®æ§åˆ¶ | æ”¯æŒé…ç½®å…è®¸è®¿é—®ç®¡ç†åå°çš„åŸŸåç™½åå• | P1 |
| é€€å‡ºç™»å½• | æ”¯æŒä¸»åŠ¨é€€å‡ºï¼Œæ¸…é™¤è®¤è¯ Cookie | P1 |

**ç¯å¢ƒå˜é‡é…ç½®**:

- `ADMIN_USERNAME`: ç®¡ç†å‘˜ç”¨æˆ·åï¼ˆé»˜è®¤: adminï¼‰
- `ADMIN_PASSWORD`: ç®¡ç†å‘˜å¯†ç ï¼ˆé»˜è®¤: admin123ï¼‰
- `AUTH_SECRET`: Token ç­¾åå¯†é’¥
- `NEXT_PUBLIC_SHOW_ADMIN_ENTRY`: æ˜¯å¦æ˜¾ç¤ºç®¡ç†å…¥å£
- `NEXT_PUBLIC_ADMIN_ALLOWED_DOMAINS`: å…è®¸è®¿é—®çš„åŸŸååˆ—è¡¨

#### 2.2.2 ä»ªè¡¨ç›˜ç»Ÿè®¡

| åŠŸèƒ½ç‚¹ | æè¿° | ä¼˜å…ˆçº§ |
|--------|------|--------|
| æ€»æç¤ºè¯æ•° | æ˜¾ç¤ºæ•°æ®åº“ä¸­æç¤ºè¯æ€»æ•° | P1 |
| æ ‡ç­¾åˆ†ç±»æ•° | æ˜¾ç¤ºå»é‡åçš„æ ‡ç­¾æ€»æ•° | P1 |
| æœ€è¿‘æ›´æ–°æ—¶é—´ | æ˜¾ç¤ºæœ€è¿‘ä¸€æ¬¡æ•°æ®æ›´æ–°æ—¥æœŸ | P1 |

#### 2.2.3 æç¤ºè¯ç®¡ç† (CRUD)

##### æ–°å»ºæç¤ºè¯

| å­—æ®µ | ç±»å‹ | å¿…å¡« | æè¿° |
|------|------|------|------|
| effect | æ–‡æœ¬ | âœ… | æ•ˆæœ/æ ‡é¢˜æè¿° |
| source | URL | âœ… | æ¥æºé“¾æ¥ |
| category | é€‰æ‹© | âœ… | ç”Ÿæˆç±»å‹ï¼ˆæ–‡ç”Ÿå›¾/æ–‡ç”Ÿè§†é¢‘/æ–‡ç”ŸéŸ³é¢‘ç­‰ï¼‰ |
| description | æ–‡æœ¬ | âœ… | è¯¦ç»†è¯´æ˜ |
| prompt | é•¿æ–‡æœ¬ | âœ… | æç¤ºè¯å†…å®¹ |
| modelTags | å¤šé€‰ | âŒ | AI æ¨¡å‹æ ‡ç­¾ï¼ˆMidjourney/DALL-E/Stable Diffusion ç­‰ï¼‰ |
| tags | æ–‡æœ¬æ•°ç»„ | âŒ | åœºæ™¯/ç”¨é€”æ ‡ç­¾åˆ—è¡¨ï¼Œé€—å·åˆ†éš” |
| imageUrl | URL | âŒ | å›¾ç‰‡åœ°å€ |

**è¡¨å•éªŒè¯è§„åˆ™**ï¼š
- æ‰€æœ‰å¿…å¡«å­—æ®µå‡ç”¨çº¢è‰²æ˜Ÿå·ï¼ˆ*ï¼‰æ ‡è®°
- ç”¨æˆ·ç‚¹å‡»æäº¤æ—¶ï¼Œè‹¥å¿…å¡«å­—æ®µæœªå¡«å†™å®Œæ•´ï¼Œå°†æ˜¾ç¤ºéªŒè¯é”™è¯¯æç¤º
- æœªå¡«å†™çš„å¿…å¡«å­—æ®µè¾“å…¥æ¡†è¾¹æ¡†æ˜¾ç¤ºçº¢è‰²ï¼Œå¹¶åœ¨å­—æ®µä¸‹æ–¹æ˜¾ç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯
- è¡¨å•åº•éƒ¨æ˜¾ç¤ºç¼ºå¤±å­—æ®µæ±‡æ€»åˆ—è¡¨ï¼Œä¾¿äºç”¨æˆ·å¿«é€Ÿå®šä½

##### ç¼–è¾‘æç¤ºè¯

- ç‚¹å‡»åˆ—è¡¨ä¸­çš„ç¼–è¾‘æŒ‰é’®ï¼ŒåŠ è½½æ•°æ®åˆ°è¡¨å•
- è¡¨å•è‡ªåŠ¨æ»šåŠ¨åˆ°å¯è§åŒºåŸŸ
- æ”¯æŒä¿®æ”¹æ‰€æœ‰å­—æ®µ
- ä¿å­˜ååˆ—è¡¨è‡ªåŠ¨æ›´æ–°

##### åˆ é™¤æç¤ºè¯

- ç‚¹å‡»åˆ é™¤æŒ‰é’®æ‰§è¡Œåˆ é™¤
- åˆ é™¤ååˆ—è¡¨è‡ªåŠ¨åˆ·æ–°

##### åˆ—è¡¨å±•ç¤º

| åŠŸèƒ½ç‚¹ | æè¿° | ä¼˜å…ˆçº§ |
|--------|------|--------|
| è¡¨æ ¼å±•ç¤º | ä»¥è¡¨æ ¼å½¢å¼å±•ç¤ºæ‰€æœ‰æç¤ºè¯ | P0 |
| åˆ—è¡¨æœç´¢ | æ”¯æŒåœ¨ç®¡ç†åˆ—è¡¨ä¸­æœç´¢ | P1 |
| å¿«æ·æ“ä½œ | æ¯è¡Œæä¾›ç¼–è¾‘ã€åˆ é™¤æŒ‰é’® | P0 |
| æ—¶é—´æ˜¾ç¤º | æ˜¾ç¤ºæ›´æ–°æ—¥æœŸå’Œæ—¶é—´ | P1 |
| æ ‡ç­¾å¾½ç«  | ä¸åŒé¢œè‰²åŒºåˆ†æ ‡ç­¾ | P2 |

#### 2.2.4 æ•°æ®å¯¼å…¥

##### å¯¼å…¥æ–¹å¼

| æ–¹å¼ | æè¿° | æ¨èåº¦ |
|------|------|--------|
| CSV æ–‡ä»¶å¯¼å…¥ | ä¸Šä¼  CSV æ–‡ä»¶æˆ–ç²˜è´´ CSV æ–‡æœ¬ | â­â­â­ æ¨è |
| JSON å¯¼å…¥ | ç²˜è´´ JSON æ•°æ®æˆ–ä¸Šä¼  JSON æ–‡ä»¶ | â­â­ |
| é£ä¹¦æ–‡æ¡£å¯¼å…¥ | è‡ªåŠ¨çˆ¬å–é£ä¹¦åœ¨çº¿æ–‡æ¡£æ•°æ® | â­ |

##### CSV æ ¼å¼è¦æ±‚

æ”¯æŒä»¥ä¸‹åˆ—åï¼ˆä¸­è‹±æ–‡å‡å¯ï¼‰:

- æ•ˆæœ/effect/æ ‡é¢˜/title
- æè¿°/description/è¯¦ç»†æè¿°
- AIæ¨¡å‹/modelTags/æ¨¡å‹æ ‡ç­¾ï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼Œå¦‚ï¼šMidjourney,DALL-Eï¼‰
- æ ‡ç­¾/tags/è¯„æµ‹å¯¹è±¡/åœºæ™¯æ ‡ç­¾ï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰
- æç¤ºè¯/prompt
- æ¥æº/source/æç¤ºè¯æ¥æº
- å›¾ç‰‡/imageUrl/å›¾ç‰‡URL
- ç±»åˆ«/category/ç”Ÿæˆç±»å‹ï¼ˆæ–‡ç”Ÿå›¾/æ–‡ç”Ÿè§†é¢‘/æ–‡ç”ŸéŸ³é¢‘/å…¶ä»–ï¼‰

##### å¯¼å…¥æ¨¡å¼

| æ¨¡å¼ | æè¿° |
|------|------|
| mergeï¼ˆåˆå¹¶ï¼‰ | ä¿ç•™ç°æœ‰æ•°æ®ï¼Œè¿½åŠ æ–°æ•°æ® |
| replaceï¼ˆæ›¿æ¢ï¼‰ | æ¸…ç©ºç°æœ‰æ•°æ®ï¼Œå¯¼å…¥æ–°æ•°æ® |

##### å¯¼å…¥æµç¨‹

1. é€‰æ‹©å¯¼å…¥æ–¹å¼ï¼ˆCSV/JSON/é£ä¹¦ï¼‰
2. ä¸Šä¼ æ–‡ä»¶æˆ–ç²˜è´´æ•°æ®
3. é€‰æ‹©å¯¼å…¥æ¨¡å¼ï¼ˆåˆå¹¶/æ›¿æ¢ï¼‰
4. ç‚¹å‡»å¼€å§‹å¯¼å…¥
5. æ˜¾ç¤ºå¯¼å…¥ç»“æœï¼ˆæˆåŠŸæ•°é‡/å¤±è´¥åŸå› ï¼‰

---

### 2.3 API æ¥å£

#### 2.3.1 æç¤ºè¯æ¥å£

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/prompts` | GET | è·å–æ‰€æœ‰æç¤ºè¯åˆ—è¡¨ |
| `/api/prompts` | POST | åˆ›å»ºæ–°æç¤ºè¯ |
| `/api/prompts/[id]` | GET | è·å–å•ä¸ªæç¤ºè¯è¯¦æƒ… |
| `/api/prompts/[id]` | PUT | æ›´æ–°æç¤ºè¯ |
| `/api/prompts/[id]` | DELETE | åˆ é™¤æç¤ºè¯ |

#### 2.3.2 åˆ†ç±»æ ‡ç­¾æ¥å£

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/tags` | GET | è·å–æ‰€æœ‰åœºæ™¯/ç”¨é€”æ ‡ç­¾åˆ—è¡¨ |
| `/api/model-tags` | GET | è·å–æ‰€æœ‰ AI æ¨¡å‹æ ‡ç­¾åˆ—è¡¨ |
| `/api/categories` | GET | è·å–æ‰€æœ‰ç”Ÿæˆç±»å‹ç±»åˆ«åˆ—è¡¨ |
| `/api/init-categories` | POST | åˆå§‹åŒ–é»˜è®¤ç±»åˆ« |
| `/api/init-model-tags` | POST | åˆå§‹åŒ–é»˜è®¤ AI æ¨¡å‹æ ‡ç­¾ |

#### 2.3.3 å¯¼å…¥æ¥å£

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/import` | POST | é€šç”¨æ•°æ®å¯¼å…¥æ¥å£ |
| `/api/import/csv` | POST | CSV è§£ææ¥å£ |
| `/api/import/feishu` | POST | é£ä¹¦æ–‡æ¡£çˆ¬å–æ¥å£ |

#### 2.3.4 è®¤è¯æ¥å£

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/auth/login` | POST | ç”¨æˆ·ç™»å½• |
| `/api/auth/logout` | POST | ç”¨æˆ·ç™»å‡º |
| `/api/auth/check` | GET | æ£€æŸ¥ç™»å½•çŠ¶æ€ |

#### 2.3.5 å›¾ç‰‡å­˜å‚¨æ¥å£ (Cloudflare R2)

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/images` | GET | è·å–å·²ä¸Šä¼ å›¾ç‰‡åˆ—è¡¨ |
| `/api/images/upload` | POST | ä¸Šä¼ å›¾ç‰‡ï¼ˆæ–‡ä»¶æˆ– URLï¼‰ |
| `/api/images/upload` | PUT | æ‰¹é‡ä» URL ä¸Šä¼ å›¾ç‰‡ |
| `/api/images/[key]` | GET | è·å– R2 å­˜å‚¨çš„å›¾ç‰‡ |
| `/api/images/[key]` | DELETE | åˆ é™¤ R2 å›¾ç‰‡ |
| `/api/images/migrate` | GET | è·å–è¿ç§»çŠ¶æ€ç»Ÿè®¡ |
| `/api/images/migrate` | POST | æ‰§è¡Œå›¾ç‰‡è¿ç§»ï¼ˆå¤–éƒ¨URLâ†’R2ï¼‰ |

#### 2.3.6 å·¥å…·æ¥å£

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/image-proxy` | GET | å›¾ç‰‡ä»£ç†ï¼ˆç»•è¿‡é˜²ç›—é“¾ï¼‰ |
| `/api/local-image` | GET | æœ¬åœ°å›¾ç‰‡è®¿é—® |
| `/api/init-db` | POST | æ•°æ®åº“åˆå§‹åŒ– |

---

### 2.4 å›¾ç‰‡å­˜å‚¨æ¨¡å— (Cloudflare R2) - æ–°å¢

#### 2.4.1 åŠŸèƒ½æ¦‚è¿°

é‡‡ç”¨ Cloudflare R2 å¯¹è±¡å­˜å‚¨æœåŠ¡ç®¡ç†æç¤ºè¯å›¾ç‰‡ï¼Œæä¾›å¯é çš„å›¾ç‰‡æ‰˜ç®¡å’Œå¿«é€Ÿè®¿é—®ã€‚

| åŠŸèƒ½ç‚¹ | æè¿° | ä¼˜å…ˆçº§ |
|--------|------|--------|
| æ–‡ä»¶ä¸Šä¼  | æ”¯æŒæ‹–æ‹½ä¸Šä¼ ã€ç‚¹å‡»é€‰æ‹©ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ | P0 |
| URL ä¸Šä¼  | ä»å¤–éƒ¨ URL ä¸‹è½½å›¾ç‰‡å¹¶ä¸Šä¼ åˆ° R2 | P0 |
| å›¾ç‰‡é¢„è§ˆ | ä¸Šä¼ åå³æ—¶é¢„è§ˆå›¾ç‰‡æ•ˆæœ | P1 |
| å›¾ç‰‡è¿ç§» | æ‰¹é‡å°†ç°æœ‰å¤–éƒ¨å›¾ç‰‡é“¾æ¥è¿ç§»åˆ° R2 | P1 |
| å›¾ç‰‡ç®¡ç† | æŸ¥çœ‹ã€åˆ é™¤å·²ä¸Šä¼ çš„å›¾ç‰‡ | P2 |

#### 2.4.2 ä¸Šä¼ æ–¹å¼

| æ–¹å¼ | æè¿° | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| æ–‡ä»¶ä¸Šä¼  | ç›´æ¥ä¸Šä¼ æœ¬åœ°å›¾ç‰‡æ–‡ä»¶ | æ–°å»ºæç¤ºè¯æ—¶ä¸Šä¼ å›¾ç‰‡ |
| URL ä¸Šä¼  | ä»ç½‘ç»œ URL ä¸‹è½½å¹¶å­˜å‚¨åˆ° R2ï¼ˆå¼ºåˆ¶ä¸Šä¼ ï¼Œä¸æ”¯æŒç›´æ¥ä½¿ç”¨å¤–éƒ¨ URLï¼‰ | å¯¼å…¥å¤–éƒ¨å›¾ç‰‡èµ„æº |
| æ‰¹é‡è¿ç§» | è‡ªåŠ¨è¿ç§»æ•°æ®åº“ä¸­çš„å¤–éƒ¨å›¾ç‰‡ | ç³»ç»Ÿå‡çº§åè¿ç§»æ—§æ•°æ® |

#### 2.4.3 æ”¯æŒçš„å›¾ç‰‡æ ¼å¼

- JPEG / JPG
- PNG
- GIF
- WebP
- SVG

æœ€å¤§æ–‡ä»¶å¤§å°ï¼š10MB

#### 2.4.4 å­˜å‚¨ç»“æ„

```
R2 Bucket: topai-images/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ {timestamp}-{random}-{filename}.jpg
â”‚   â”œâ”€â”€ {timestamp}-{random}-{filename}.png
â”‚   â””â”€â”€ ...
```

#### 2.4.5 è®¿é—®æ–¹å¼

| æ–¹å¼ | è¯´æ˜ | URL æ ¼å¼ |
|------|------|----------|
| å…¬å¼€è®¿é—® | é…ç½® R2 å…¬å¼€åŸŸååç›´æ¥è®¿é—®ï¼ˆæ¨èï¼Œé€Ÿåº¦æœ€å¿«ï¼‰ | `https://images.yourdomain.com/images/xxx.jpg` |
| API ä»£ç† | é€šè¿‡ API è·¯ç”±ä»£ç†è®¿é—® | `/api/images/{key}` |

#### 2.4.6 å›¾ç‰‡åŠ è½½ä¼˜åŒ– (v1.1 æ–°å¢)

ä¸ºæå‡å›¾ç‰‡åŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒï¼Œç³»ç»Ÿå®ç°äº†ä»¥ä¸‹ä¼˜åŒ–æªæ–½ï¼š

| ä¼˜åŒ–é¡¹ | æè¿° | æ•ˆæœ |
|--------|------|------|
| R2 å…¬å¼€ URL | é…ç½® `CLOUDFLARE_R2_PUBLIC_URL` åç›´æ¥ä» CDN è®¿é—® | å‡å°‘ API ä»£ç†å»¶è¿Ÿ |
| Next.js Image ä¼˜åŒ– | è‡ªåŠ¨è½¬æ¢ WebP/AVIF æ ¼å¼ï¼Œå“åº”å¼å°ºå¯¸ | å‡å°‘å›¾ç‰‡ä½“ç§¯ 30-50% |
| Intersection Observer | è§†å£è¿›å…¥å‰ 200px å¼€å§‹é¢„åŠ è½½ | å‡å°‘ç­‰å¾…æ—¶é—´ |
| éª¨æ¶å±å ä½ç¬¦ | åŠ è½½ä¸­æ˜¾ç¤ºåŠ¨ç”»éª¨æ¶å± | æ”¹å–„ç”¨æˆ·ä½“éªŒ |
| æ¸è¿›å¼åŠ è½½ | å›¾ç‰‡åŠ è½½å®Œæˆåæ·¡å…¥æ˜¾ç¤º | å¹³æ»‘è¿‡æ¸¡æ•ˆæœ |
| é•¿æœŸç¼“å­˜ | 1å¹´ Cache-Control + immutable | é‡å¤è®¿é—®å³æ—¶åŠ è½½ |

**OptimizedImage ç»„ä»¶**ï¼š

ä½äº `app/(frontend)/components/OptimizedImage.tsx`ï¼Œå°è£…äº†æ‰€æœ‰å›¾ç‰‡ä¼˜åŒ–é€»è¾‘ï¼š
- è‡ªåŠ¨åˆ¤æ–­å›¾ç‰‡æ¥æºå¹¶é€‰æ‹©æœ€ä½³åŠ è½½æ–¹å¼
- æ”¯æŒ fill æ¨¡å¼å’Œå›ºå®šå°ºå¯¸æ¨¡å¼
- å†…ç½®é”™è¯¯å¤„ç†å’Œå ä½ç¬¦
- æ”¯æŒ priority å±æ€§ä¼˜å…ˆåŠ è½½é¦–å±å›¾ç‰‡

#### 2.4.7 é…ç½®è¯´æ˜

ä½¿ç”¨ R2 å­˜å‚¨éœ€è¦é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

1. **CLOUDFLARE_R2_ACCOUNT_ID**: åœ¨ Cloudflare Dashboard é¦–é¡µè·å–
2. **CLOUDFLARE_R2_ACCESS_KEY_ID** å’Œ **CLOUDFLARE_R2_SECRET_ACCESS_KEY**: 
   - è¿›å…¥ R2 > Manage R2 API Tokens
   - åˆ›å»º API Tokenï¼Œé€‰æ‹© Object Read & Write æƒé™
3. **CLOUDFLARE_R2_BUCKET_NAME**: R2 Bucket åç§°ï¼ˆéœ€å…ˆåˆ›å»ºï¼‰
4. **CLOUDFLARE_R2_PUBLIC_URL**: (å¯é€‰) é…ç½®å…¬å¼€è®¿é—®åŸŸå

---

## 3. æ•°æ®æ¨¡å‹

### 3.1 æç¤ºè¯ (Prompt)

```prisma
model Prompt {
  id          String      @id @default(uuid())
  effect      String      // æ•ˆæœ/æ ‡é¢˜æè¿°
  description String      // è¯¦ç»†è¯´æ˜
  prompt      String      // æç¤ºè¯å†…å®¹
  source      String      // æ¥æºé“¾æ¥
  imageUrl    String?     // å›¾ç‰‡URLï¼ˆå¯é€‰ï¼‰
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  tags        Tag[]       // å…³è”åœºæ™¯/ç”¨é€”æ ‡ç­¾
  category    Category?   @relation(fields: [categoryId], references: [id])
  categoryId  String?     // å…³è”ç”Ÿæˆç±»å‹ç±»åˆ«ID
  modelTags   ModelTag[]  // å…³è” AI æ¨¡å‹æ ‡ç­¾ï¼ˆæ–°å¢ï¼‰
}
```

### 3.2 æ ‡ç­¾ (Tag)

```prisma
model Tag {
  id      String   @id @default(uuid())
  name    String   @unique
  prompts Prompt[] // å¤šå¯¹å¤šå…³è”
}
```

### 3.3 ç±»åˆ« (Category)

```prisma
model Category {
  id        String   @id @default(uuid())
  name      String   @unique
  createdAt DateTime @default(now())
  prompts   Prompt[] // ä¸€å¯¹å¤šå…³è”
}
```

**é»˜è®¤ç”Ÿæˆç±»å‹ç±»åˆ«**:
- æ–‡ç”Ÿå›¾
- æ–‡ç”Ÿè§†é¢‘
- æ–‡ç”ŸéŸ³é¢‘
- å…¶ä»–

### 3.4 AI æ¨¡å‹æ ‡ç­¾ (ModelTag) - æ–°å¢

```prisma
model ModelTag {
  id        String   @id @default(uuid())
  name      String   @unique      // æ¨¡å‹åç§°
  icon      String?               // æ¨¡å‹å›¾æ ‡ URLï¼ˆå¯é€‰ï¼‰
  color     String?               // æ˜¾ç¤ºé¢œè‰²ï¼ˆå¯é€‰ï¼‰
  createdAt DateTime @default(now())
  prompts   Prompt[] // å¤šå¯¹å¤šå…³è”
}
```

### 3.5 å›¾ç‰‡å­˜å‚¨ (Image) - æ–°å¢

ç”¨äºè®°å½•ä¸Šä¼ åˆ° Cloudflare R2 çš„å›¾ç‰‡ä¿¡æ¯ã€‚

```prisma
model Image {
  id           String   @id @default(uuid())
  key          String   @unique    // R2 å­˜å‚¨çš„ keyï¼ˆå¦‚ images/xxx.jpgï¼‰
  originalUrl  String?             // åŸå§‹å›¾ç‰‡ URLï¼ˆè¿ç§»å‰çš„ URLï¼‰
  url          String              // å½“å‰è®¿é—® URL
  fileName     String?             // åŸå§‹æ–‡ä»¶å
  contentType  String?             // MIME ç±»å‹
  size         Int?                // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
  promptId     String?             // å…³è”çš„æç¤ºè¯ IDï¼ˆå¯é€‰ï¼‰
  status       String   @default("active")  // çŠ¶æ€: active, deleted, pending
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}
```

**é»˜è®¤ AI æ¨¡å‹æ ‡ç­¾**:

- Midjourney
- DALL-E 3
- Stable Diffusion
- Flux
- Runway
- Sora
- Pika
- Klingï¼ˆå¯çµï¼‰
- DeepSeek
- Banana
- ComfyUI
- Leonardo.AI
- å…¶ä»–æ¨¡å‹

---

## 4. æŠ€æœ¯æ¶æ„

### 4.1 æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯é€‰å‹ |
|------|----------|
| å‰ç«¯æ¡†æ¶ | Next.js 14 (App Router) |
| ç¼–ç¨‹è¯­è¨€ | TypeScript |
| æ ·å¼æ–¹æ¡ˆ | Tailwind CSS |
| å›¾æ ‡åº“ | Lucide React |
| ORM | Prisma |
| æ•°æ®åº“ | PostgreSQL (ç”Ÿäº§) / SQLite (å¼€å‘) |
| éƒ¨ç½²å¹³å° | Vercel / Docker |

### 4.2 é¡¹ç›®ç»“æ„

```
topai/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ (frontend)/              # å‰ç«¯å±•ç¤ºæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ components/          # å‰ç«¯ä¸“ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ home/            # é¦–é¡µå­ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx  # å·¦ä¾§å¯¼èˆªæ ï¼ˆç”Ÿæˆç±»å‹+AIæ¨¡å‹ç­›é€‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchBox.tsx # æœç´¢æ¡†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CategoryFilter.tsx # ç”Ÿæˆç±»å‹ç­›é€‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ModelTagFilter.tsx # AIæ¨¡å‹ç­›é€‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TagFilter.tsx # åœºæ™¯æ ‡ç­¾ç­›é€‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PromptGrid.tsx # æç¤ºè¯ç½‘æ ¼
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ HeroSection.tsx # è‹±é›„åŒº
â”‚   â”‚   â”‚   â”œâ”€â”€ PromptCard.tsx   # æç¤ºè¯å¡ç‰‡
â”‚   â”‚   â”‚   â””â”€â”€ Pagination.tsx   # åˆ†é¡µç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ HomeClient.tsx       # é¦–é¡µå®¢æˆ·ç«¯ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout.tsx           # å‰ç«¯å¸ƒå±€
â”‚   â”‚   â””â”€â”€ page.tsx             # é¦–é¡µ
â”‚   â”œâ”€â”€ (admin)/                 # åå°ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ admin/               # ç®¡ç†ä¸»é¡µé¢
â”‚   â”‚   â”œâ”€â”€ login/               # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ components/          # åå°ä¸“ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ import/          # å¯¼å…¥ç›¸å…³å­ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminHeader.tsx  # ç®¡ç†å¤´éƒ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ PromptForm.tsx   # è¡¨å•ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ PromptTable.tsx  # åˆ—è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ImportModal.tsx  # å¯¼å…¥å¼¹çª—
â”‚   â”‚   â”‚   â””â”€â”€ DashboardStats.tsx # ä»ªè¡¨ç›˜ç»Ÿè®¡
â”‚   â”‚   â””â”€â”€ layout.tsx           # åå°å¸ƒå±€
â”‚   â”œâ”€â”€ api/                     # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth/                # è®¤è¯æ¥å£
â”‚   â”‚   â”œâ”€â”€ prompts/             # æç¤ºè¯ CRUD
â”‚   â”‚   â”œâ”€â”€ import/              # å¯¼å…¥æ¥å£
â”‚   â”‚   â”œâ”€â”€ tags/                # æ ‡ç­¾æ¥å£
â”‚   â”‚   â””â”€â”€ categories/          # ç±»åˆ«æ¥å£
â”‚   â””â”€â”€ globals.css              # å…¨å±€æ ·å¼
â”œâ”€â”€ components/shared/           # å…±äº«é€šç”¨ç»„ä»¶
â”œâ”€â”€ hooks/                       # è‡ªå®šä¹‰ React Hooks
â”‚   â”œâ”€â”€ useAuth.ts               # è®¤è¯çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ usePrompts.ts            # æç¤ºè¯æ•°æ®ç®¡ç†
â”‚   â”œâ”€â”€ usePromptForm.ts         # è¡¨å•çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ useSearch.ts             # æœç´¢ç­›é€‰é€»è¾‘
â”‚   â”œâ”€â”€ usePagination.ts         # åˆ†é¡µé€»è¾‘
â”‚   â””â”€â”€ useImport.ts             # å¯¼å…¥æµç¨‹ç®¡ç†
â”œâ”€â”€ lib/                         # å·¥å…·åº“
â”‚   â”œâ”€â”€ auth.ts                  # è®¤è¯å·¥å…·
â”‚   â”œâ”€â”€ constants.ts             # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ storage.ts               # æ•°æ®å­˜å‚¨æ“ä½œ
â”‚   â”œâ”€â”€ csv-parser.ts            # CSV è§£æ
â”‚   â”œâ”€â”€ feishu-scraper.ts        # é£ä¹¦çˆ¬è™«
â”‚   â””â”€â”€ styles.ts                # æ ·å¼å¸¸é‡
â”œâ”€â”€ services/                    # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ prompt.service.ts        # æç¤ºè¯æœåŠ¡
â”‚   â””â”€â”€ import.service.ts        # å¯¼å…¥æœåŠ¡
â”œâ”€â”€ types/                       # ç±»å‹å®šä¹‰
â”œâ”€â”€ prisma/                      # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ schema.prisma            # æ•°æ®åº“ Schema
â”‚   â””â”€â”€ migrations/              # è¿ç§»æ–‡ä»¶
â”œâ”€â”€ middleware.ts                # ä¸­é—´ä»¶ï¼ˆè·¯ç”±ä¿æŠ¤ï¼‰
â””â”€â”€ scripts/                     # è„šæœ¬å·¥å…·
```

### 4.3 éƒ¨ç½²æ–¹å¼

| æ–¹å¼ | è¯´æ˜ |
|------|------|
| Vercel | æ¨èï¼Œæ”¯æŒ Postgres æ‰˜ç®¡ |
| Docker | æä¾› Dockerfile å’Œ docker-compose |
| Node.js | ä¼ ç»Ÿ npm build + npm start |
| GitHub Pages | ä»…é™æ€å‰ç«¯å±•ç¤º |

---

## 5. éåŠŸèƒ½æ€§éœ€æ±‚

### 5.1 æ€§èƒ½è¦æ±‚

- é¦–é¡µåŠ è½½æ—¶é—´ < 3ç§’ï¼ˆé¦–å±ï¼‰
- æœç´¢å“åº”æ—¶é—´ < 200ms
- åˆ†é¡µåˆ‡æ¢æ— æ˜æ˜¾å»¶è¿Ÿ
- æ”¯æŒ 1000+ æ¡æ•°æ®æµç•…æ“ä½œ
- **å›¾ç‰‡åŠ è½½ä¼˜åŒ–**ï¼ˆv1.1 æ–°å¢ï¼‰:
  - ä½¿ç”¨ Intersection Observer å®ç°è§†å£é¢„åŠ è½½ï¼ˆæå‰ 200pxï¼‰
  - éª¨æ¶å±å ä½ç¬¦åŠ¨ç”»ï¼Œä¼˜åŒ–ç”¨æˆ·ç­‰å¾…ä½“éªŒ
  - æ¸è¿›å¼å›¾ç‰‡åŠ è½½ï¼ˆæ·¡å…¥æ•ˆæœï¼‰
  - Next.js Image ç»„ä»¶è‡ªåŠ¨ WebP/AVIF è½¬æ¢
  - å“åº”å¼å›¾ç‰‡å°ºå¯¸ (sizes å±æ€§ä¼˜åŒ–)
  - 1å¹´ç¼“å­˜ç­–ç•¥ (Cache-Control: max-age=31536000)

### 5.2 å®‰å…¨è¦æ±‚

- ç®¡ç†åå°å¿…é¡»è®¤è¯è®¿é—®
- æ”¯æŒåŸŸåç™½åå•è®¿é—®æ§åˆ¶
- Token ä½¿ç”¨ HTTPOnly Cookie å­˜å‚¨
- ç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶ Secure Cookie

### 5.3 å…¼å®¹æ€§è¦æ±‚

- æ”¯æŒç°ä»£æµè§ˆå™¨ï¼ˆChrome/Firefox/Safari/Edge æœ€æ–°ç‰ˆæœ¬ï¼‰
- ç§»åŠ¨ç«¯ iOS Safari / Android Chrome
- å“åº”å¼å¸ƒå±€æ–­ç‚¹ï¼šsm(640px) / md(768px) / lg(1024px)

### 5.4 å¯ç»´æŠ¤æ€§

- é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼ŒèŒè´£åˆ†ç¦»
- å®Œæ•´çš„ TypeScript ç±»å‹è¦†ç›–
- é›†ä¸­ç®¡ç†å¸¸é‡å’Œé…ç½®
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶

---

## 6. ç‰ˆæœ¬è§„åˆ’

### v1.0 (å½“å‰ç‰ˆæœ¬)
- âœ… å‰ç«¯å±•ç¤ºé¡µé¢
- âœ… æœç´¢å’Œç­›é€‰åŠŸèƒ½
- âœ… åˆ†é¡µåŠŸèƒ½
- âœ… ç®¡ç†åå° CRUD
- âœ… å¤šæ–¹å¼æ•°æ®å¯¼å…¥
- âœ… ç™»å½•è®¤è¯
- âœ… åŸŸåè®¿é—®æ§åˆ¶

### v1.1 (è§„åˆ’ä¸­)
- âœ… AI æ¨¡å‹æ ‡ç­¾åŠŸèƒ½ï¼ˆæ”¯æŒæŒ‰ Midjourney/DALL-E/Stable Diffusion ç­‰æ¨¡å‹ç­›é€‰ï¼‰
- âœ… è‡ªåŠ¨æ ‡ç­¾æ¨æ–­ï¼ˆæ ¹æ®æç¤ºè¯å†…å®¹è‡ªåŠ¨æ¨è/å¡«å……æ ‡ç­¾ï¼‰
- âœ… æ•°æ®å®Œæ•´æ€§æ£€æŸ¥è„šæœ¬ï¼ˆæ£€æµ‹ç¼ºå¤±å­—æ®µå¹¶è‡ªåŠ¨å¡«å……ï¼‰
- ğŸ”² æ ‡ç­¾ç¼ºå¤±æé†’ï¼ˆå¯¼å…¥æ—¶æç¤ºæ ‡ç­¾ä¸ºç©ºçš„è®°å½•ï¼‰
- ğŸ”² æç¤ºè¯æ”¶è—åŠŸèƒ½
- ğŸ”² ç”¨æˆ·è¯„åˆ†ç³»ç»Ÿ
- ğŸ”² æç¤ºè¯è¯¦æƒ…é¡µ
- ğŸ”² åˆ†äº«åŠŸèƒ½

### v2.0 (è¿œæœŸè§„åˆ’)
- ğŸ”² å¤šç”¨æˆ·ç³»ç»Ÿ
- ğŸ”² æç¤ºè¯æŠ•ç¨¿
- ğŸ”² AI æ¨è
- ğŸ”² API å¼€æ”¾æ¥å£

---

## 7. é™„å½•

### 7.1 ç¯å¢ƒå˜é‡æ¸…å•

| å˜é‡å | æè¿° | é»˜è®¤å€¼ |
|--------|------|--------|
| `DATABASE_URL` | æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸² | - |
| `ADMIN_USERNAME` | ç®¡ç†å‘˜ç”¨æˆ·å | admin |
| `ADMIN_PASSWORD` | ç®¡ç†å‘˜å¯†ç  | admin123 |
| `AUTH_SECRET` | Token ç­¾åå¯†é’¥ | your-secret-key... |
| `NEXT_PUBLIC_SHOW_ADMIN_ENTRY` | æ˜¯å¦æ˜¾ç¤ºç®¡ç†å…¥å£ | true |
| `NEXT_PUBLIC_ADMIN_ALLOWED_DOMAINS` | å…è®¸è®¿é—®çš„åŸŸå | (å…¨éƒ¨å…è®¸) |
| `CLOUDFLARE_R2_ACCOUNT_ID` | Cloudflare Account ID | - |
| `CLOUDFLARE_R2_ACCESS_KEY_ID` | R2 API Access Key ID | - |
| `CLOUDFLARE_R2_SECRET_ACCESS_KEY` | R2 API Secret Access Key | - |
| `CLOUDFLARE_R2_BUCKET_NAME` | R2 Bucket åç§° | topai-images |
| `CLOUDFLARE_R2_PUBLIC_URL` | R2 å…¬å¼€è®¿é—® URL | (ä½¿ç”¨ API ä»£ç†) |

### 7.2 é»˜è®¤ AI æ¨¡å‹æ ‡ç­¾

| æ¨¡å‹åç§° | ç±»å‹ | è¯´æ˜ |
|----------|------|------|
| Midjourney | æ–‡ç”Ÿå›¾ | Discord æœºå™¨äººå½¢å¼çš„ AI ç»˜ç”»å·¥å…· |
| DALL-E 3 | æ–‡ç”Ÿå›¾ | OpenAI å¼€å‘çš„å›¾åƒç”Ÿæˆæ¨¡å‹ |
| Stable Diffusion | æ–‡ç”Ÿå›¾ | å¼€æºæ–‡ç”Ÿå›¾æ¨¡å‹ |
| Flux | æ–‡ç”Ÿå›¾ | Black Forest Labs å¼€å‘çš„å¼€æºæ¨¡å‹ |
| Leonardo.AI | æ–‡ç”Ÿå›¾ | åœ¨çº¿ AI å›¾åƒç”Ÿæˆå¹³å° |
| ComfyUI | æ–‡ç”Ÿå›¾ | èŠ‚ç‚¹å¼å›¾åƒç”Ÿæˆå·¥ä½œæµ |
| Runway | æ–‡ç”Ÿè§†é¢‘ | AI è§†é¢‘ç”Ÿæˆå¹³å° |
| Sora | æ–‡ç”Ÿè§†é¢‘ | OpenAI è§†é¢‘ç”Ÿæˆæ¨¡å‹ |
| Pika | æ–‡ç”Ÿè§†é¢‘ | AI è§†é¢‘ç”Ÿæˆå·¥å…· |
| Klingï¼ˆå¯çµï¼‰| æ–‡ç”Ÿè§†é¢‘ | å¿«æ‰‹ AI è§†é¢‘ç”Ÿæˆ |
| Suno | æ–‡ç”ŸéŸ³é¢‘ | AI éŸ³ä¹ç”Ÿæˆ |
| Udio | æ–‡ç”ŸéŸ³é¢‘ | AI éŸ³ä¹åˆ›ä½œ |
| DeepSeek | å¤šæ¨¡æ€ | æ·±åº¦æ±‚ç´¢å¤§æ¨¡å‹ |
| Banana | å…¶ä»– | AI æ¨¡å‹éƒ¨ç½²å¹³å° |
| å…¶ä»–æ¨¡å‹ | é€šç”¨ | æœªåˆ†ç±»çš„å…¶ä»– AI æ¨¡å‹ |

### 7.3 API å“åº”æ ¼å¼

```typescript
// æˆåŠŸå“åº”
{
  success: true,
  data: T
}

// å¤±è´¥å“åº”
{
  success: false,
  error: string
}
```

### 7.4 æ•°æ®å®Œæ•´æ€§æ£€æŸ¥è„šæœ¬

ç³»ç»Ÿæä¾›äº†æ•°æ®å®Œæ•´æ€§æ£€æŸ¥å’Œè‡ªåŠ¨å¡«å……è„šæœ¬ï¼Œç”¨äºç¡®ä¿æ•°æ®åº“ä¸­çš„æç¤ºè¯æ•°æ®å®Œæ•´ã€‚

#### æ£€æŸ¥è„šæœ¬

```bash
# æ£€æŸ¥ç¼ºå¤±å­—æ®µ
npx ts-node scripts/check-missing-fields.ts
```

æ£€æŸ¥ä»¥ä¸‹å­—æ®µçš„ç¼ºå¤±æƒ…å†µï¼š
- `category` - ç”Ÿæˆç±»å‹ç±»åˆ«
- `tags` - åœºæ™¯/ç”¨é€”æ ‡ç­¾
- `modelTags` - AIæ¨¡å‹æ ‡ç­¾
- `description` - æè¿°
- `source` - æ¥æº
- `imageUrl` - å›¾ç‰‡URL

#### å¡«å……è„šæœ¬

```bash
# è‡ªåŠ¨å¡«å……ç¼ºå¤±å­—æ®µ
npx ts-node scripts/fill-missing-fields.ts
```

è„šæœ¬æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. **åˆå§‹åŒ–é»˜è®¤ç±»åˆ«**: åˆ›å»º"æ–‡ç”Ÿå›¾"ã€"æ–‡ç”Ÿè§†é¢‘"ã€"æ–‡ç”ŸéŸ³é¢‘"ã€"å…¶ä»–"å››ä¸ªé»˜è®¤ç±»åˆ«
2. **åˆå§‹åŒ–é»˜è®¤AIæ¨¡å‹æ ‡ç­¾**: åˆ›å»º15ä¸ªå¸¸ç”¨AIæ¨¡å‹æ ‡ç­¾ï¼ˆå«é¢œè‰²å’Œç±»å‹ä¿¡æ¯ï¼‰
3. **å¡«å……ç¼ºå¤±ç±»åˆ«**: å°†æ²¡æœ‰ç±»åˆ«çš„æç¤ºè¯é»˜è®¤è®¾ä¸º"æ–‡ç”Ÿå›¾"
4. **æ™ºèƒ½æ¨æ–­AIæ¨¡å‹æ ‡ç­¾**: æ ¹æ®æç¤ºè¯å†…å®¹å’Œæ¥æºè‡ªåŠ¨åŒ¹é…AIæ¨¡å‹æ ‡ç­¾

#### æ™ºèƒ½æ¨¡å‹æ¨æ–­è§„åˆ™

| å…³é”®è¯ | æ¨æ–­æ¨¡å‹ |
|--------|----------|
| midjourney, mj, midj | Midjourney |
| dall-e, dalle, openai | DALL-E 3 |
| stable diffusion, sd, sdxl | Stable Diffusion |
| flux, black forest | Flux |
| runway, gen-2 | Runway |
| sora | Sora |
| pika | Pika |
| å¯çµ, kling | Klingï¼ˆå¯çµï¼‰|
| banana (æ¥æº) | Banana |

### 7.5 å‚è€ƒæ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹æŒ‡å—](./QUICKSTART.md)
- [éƒ¨ç½²æŒ‡å—](./DEPLOYMENT.md)
- [å¯¼å…¥æŒ‡å—](./IMPORT_GUIDE.md)
- [CSV æ ¼å¼æŒ‡å—](./CSV_FORMAT_GUIDE.md)
- [åˆ†é¡µåŠŸèƒ½è¯´æ˜](./PAGINATION_GUIDE.md)

---

*æ–‡æ¡£ç»“æŸ*

